
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <title>OnCondition and OnContextCondition · Agentic Documentation</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 6.0.3">
        <meta name="author" content="AutoGen Team">
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/@honkit/honkit-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="contextexpression.html" />
    
    
    <link rel="prev" href="contextcondition-and-availablecondition.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../foundations-of-agents-and-messages/">
            
                <a href="../foundations-of-agents-and-messages/">
            
                    
                    Foundations of Agents and Messages
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../foundations-of-agents-and-messages/agent-protocol.html">
            
                <a href="../foundations-of-agents-and-messages/agent-protocol.html">
            
                    
                    Agent protocol
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../foundations-of-agents-and-messages/llmagent.html">
            
                <a href="../foundations-of-agents-and-messages/llmagent.html">
            
                    
                    LLMAgent
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../foundations-of-agents-and-messages/conversableagent.html">
            
                <a href="../foundations-of-agents-and-messages/conversableagent.html">
            
                    
                    ConversableAgent
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../foundations-of-agents-and-messages/basemessage-and-message-serialization.html">
            
                <a href="../foundations-of-agents-and-messages/basemessage-and-message-serialization.html">
            
                    
                    BaseMessage and message serialization
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../conversable-agent-workflow/">
            
                <a href="../conversable-agent-workflow/">
            
                    
                    Conversable Agent Workflow
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../conversable-agent-workflow/reply-function-registration.html">
            
                <a href="../conversable-agent-workflow/reply-function-registration.html">
            
                    
                    Reply function registration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../conversable-agent-workflow/chat-message-flow.html">
            
                <a href="../conversable-agent-workflow/chat-message-flow.html">
            
                    
                    Chat message flow
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../conversable-agent-workflow/human-input-modes.html">
            
                <a href="../conversable-agent-workflow/human-input-modes.html">
            
                    
                    Human input modes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../tools-and-dependency-injection/">
            
                <a href="../tools-and-dependency-injection/">
            
                    
                    Tools and Dependency Injection
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../tools-and-dependency-injection/tool-abstraction.html">
            
                <a href="../tools-and-dependency-injection/tool-abstraction.html">
            
                    
                    Tool abstraction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../tools-and-dependency-injection/toolkit.html">
            
                <a href="../tools-and-dependency-injection/toolkit.html">
            
                    
                    Toolkit
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../tools-and-dependency-injection/dependency-injection-with-depends.html">
            
                <a href="../tools-and-dependency-injection/dependency-injection-with-depends.html">
            
                    
                    Dependency injection with Depends
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../tools-and-dependency-injection/context-parameter-injection.html">
            
                <a href="../tools-and-dependency-injection/context-parameter-injection.html">
            
                    
                    Context parameter injection
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../llm-configuration-and-model-clients/">
            
                <a href="../llm-configuration-and-model-clients/">
            
                    
                    LLM Configuration and Model Clients
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../llm-configuration-and-model-clients/llmconfig-and-llmconfigentry.html">
            
                <a href="../llm-configuration-and-model-clients/llmconfig-and-llmconfigentry.html">
            
                    
                    LLMConfig and LLMConfigEntry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../llm-configuration-and-model-clients/modelclient-protocol.html">
            
                <a href="../llm-configuration-and-model-clients/modelclient-protocol.html">
            
                    
                    ModelClient protocol
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../llm-configuration-and-model-clients/config-list-and-filtering.html">
            
                <a href="../llm-configuration-and-model-clients/config-list-and-filtering.html">
            
                    
                    Config list and filtering
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../advanced-agent-orchestration/">
            
                <a href="../advanced-agent-orchestration/">
            
                    
                    Advanced Agent Orchestration
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../advanced-agent-orchestration/groupchat-and-groupchatmanager.html">
            
                <a href="../advanced-agent-orchestration/groupchat-and-groupchatmanager.html">
            
                    
                    GroupChat and GroupChatManager
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../advanced-agent-orchestration/patterns-for-orchestration-(auto,-manual,-roundrobin,-random">
            
                <span>
            
                    
                    Patterns for orchestration (Auto, Manual, RoundRobin, Random)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../advanced-agent-orchestration/speaker-selection-methods.html">
            
                <a href="../advanced-agent-orchestration/speaker-selection-methods.html">
            
                    
                    Speaker selection methods
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../advanced-agent-orchestration/transitiontarget-and-handoff-conditions.html">
            
                <a href="../advanced-agent-orchestration/transitiontarget-and-handoff-conditions.html">
            
                    
                    TransitionTarget and handoff conditions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="./">
            
                <a href="./">
            
                    
                    Context Variables and Conditional Logic
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="contextvariables.html">
            
                <a href="contextvariables.html">
            
                    
                    ContextVariables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="contextcondition-and-availablecondition.html">
            
                <a href="contextcondition-and-availablecondition.html">
            
                    
                    ContextCondition and AvailableCondition
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.7.3" data-path="oncondition-and-oncontextcondition.html">
            
                <a href="oncondition-and-oncontextcondition.html">
            
                    
                    OnCondition and OnContextCondition
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="contextexpression.html">
            
                <a href="contextexpression.html">
            
                    
                    ContextExpression
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../tool-and-function-interoperability/">
            
                <a href="../tool-and-function-interoperability/">
            
                    
                    Tool and Function Interoperability
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../tool-and-function-interoperability/interoperable-protocol.html">
            
                <a href="../tool-and-function-interoperability/interoperable-protocol.html">
            
                    
                    Interoperable protocol
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../tool-and-function-interoperability/interoperability-registry.html">
            
                <a href="../tool-and-function-interoperability/interoperability-registry.html">
            
                    
                    Interoperability registry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../tool-and-function-interoperability/langchain-and-crewai-tool-conversion.html">
            
                <a href="../tool-and-function-interoperability/langchain-and-crewai-tool-conversion.html">
            
                    
                    LangChain and CrewAI tool conversion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../tool-and-function-interoperability/pydantic-ai-tool-integration.html">
            
                <a href="../tool-and-function-interoperability/pydantic-ai-tool-integration.html">
            
                    
                    Pydantic AI tool integration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../retrieval-augmented-generation-and-vector-databases/">
            
                <a href="../retrieval-augmented-generation-and-vector-databases/">
            
                    
                    Retrieval Augmented Generation and Vector Databases
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../retrieval-augmented-generation-and-vector-databases/retrieveuserproxyagent.html">
            
                <a href="../retrieval-augmented-generation-and-vector-databases/retrieveuserproxyagent.html">
            
                    
                    RetrieveUserProxyAgent
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../retrieval-augmented-generation-and-vector-databases/vectordb-protocol.html">
            
                <a href="../retrieval-augmented-generation-and-vector-databases/vectordb-protocol.html">
            
                    
                    VectorDB protocol
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../retrieval-augmented-generation-and-vector-databases/chromadb-pgvector-qdrant-mongodb-integrations.html">
            
                <a href="../retrieval-augmented-generation-and-vector-databases/chromadb-pgvector-qdrant-mongodb-integrations.html">
            
                    
                    ChromaDB PGVector Qdrant MongoDB integrations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../retrieval-augmented-generation-and-vector-databases/querying-and-chunking-strategies.html">
            
                <a href="../retrieval-augmented-generation-and-vector-databases/querying-and-chunking-strategies.html">
            
                    
                    Querying and chunking strategies
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../structured-outputs-and-tool-calling-with-llms/">
            
                <a href="../structured-outputs-and-tool-calling-with-llms/">
            
                    
                    Structured Outputs and Tool Calling with LLMs
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../structured-outputs-and-tool-calling-with-llms/function-and-tool-schemas.html">
            
                <a href="../structured-outputs-and-tool-calling-with-llms/function-and-tool-schemas.html">
            
                    
                    Function and Tool schemas
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../structured-outputs-and-tool-calling-with-llms/structured-output-formatting.html">
            
                <a href="../structured-outputs-and-tool-calling-with-llms/structured-output-formatting.html">
            
                    
                    Structured output formatting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../structured-outputs-and-tool-calling-with-llms/tool-call-and-function-call-message-handling.html">
            
                <a href="../structured-outputs-and-tool-calling-with-llms/tool-call-and-function-call-message-handling.html">
            
                    
                    Tool call and function call message handling
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../multimodal-and-vision-capabilities/">
            
                <a href="../multimodal-and-vision-capabilities/">
            
                    
                    Multimodal and Vision Capabilities
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../multimodal-and-vision-capabilities/multimodalconversableagent.html">
            
                <a href="../multimodal-and-vision-capabilities/multimodalconversableagent.html">
            
                    
                    MultimodalConversableAgent
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="../multimodal-and-vision-capabilities/visioncapability.html">
            
                <a href="../multimodal-and-vision-capabilities/visioncapability.html">
            
                    
                    VisionCapability
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="../multimodal-and-vision-capabilities/image-generation-and-captioning-tools.html">
            
                <a href="../multimodal-and-vision-capabilities/image-generation-and-captioning-tools.html">
            
                    
                    Image generation and captioning tools
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.4" data-path="../multimodal-and-vision-capabilities/content-formatting-for-images.html">
            
                <a href="../multimodal-and-vision-capabilities/content-formatting-for-images.html">
            
                    
                    Content formatting for images
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../agent-capabilities-and-composability/">
            
                <a href="../agent-capabilities-and-composability/">
            
                    
                    Agent Capabilities and Composability
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../agent-capabilities-and-composability/agentcapability-base-class.html">
            
                <a href="../agent-capabilities-and-composability/agentcapability-base-class.html">
            
                    
                    AgentCapability base class
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../agent-capabilities-and-composability/teachability-and-memory.html">
            
                <a href="../agent-capabilities-and-composability/teachability-and-memory.html">
            
                    
                    Teachability and memory
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../agent-capabilities-and-composability/toolscapability-composition.html">
            
                <a href="../agent-capabilities-and-composability/toolscapability-composition.html">
            
                    
                    ToolsCapability composition
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="../agent-capabilities-and-composability/transformmessages-and-message-transforms.html">
            
                <a href="../agent-capabilities-and-composability/transformmessages-and-message-transforms.html">
            
                    
                    TransformMessages and message transforms
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../group-and-swarm-agent-patterns/">
            
                <a href="../group-and-swarm-agent-patterns/">
            
                    
                    Group and Swarm Agent Patterns
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="../group-and-swarm-agent-patterns/swarmagent-and-afterwork.html">
            
                <a href="../group-and-swarm-agent-patterns/swarmagent-and-afterwork.html">
            
                    
                    SwarmAgent and AfterWork
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="../group-and-swarm-agent-patterns/oncondition-and-nested-chat-transitions.html">
            
                <a href="../group-and-swarm-agent-patterns/oncondition-and-nested-chat-transitions.html">
            
                    
                    OnCondition and nested chat transitions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="../group-and-swarm-agent-patterns/pattern-classes-for-orchestration.html">
            
                <a href="../group-and-swarm-agent-patterns/pattern-classes-for-orchestration.html">
            
                    
                    Pattern classes for orchestration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../practical-pitfalls-and-best-practices/">
            
                <a href="../practical-pitfalls-and-best-practices/">
            
                    
                    Practical Pitfalls and Best Practices
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="../practical-pitfalls-and-best-practices/error-handling-in-agent-orchestration.html">
            
                <a href="../practical-pitfalls-and-best-practices/error-handling-in-agent-orchestration.html">
            
                    
                    Error handling in agent orchestration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="../practical-pitfalls-and-best-practices/security-considerations-for-code-execution.html">
            
                <a href="../practical-pitfalls-and-best-practices/security-considerations-for-code-execution.html">
            
                    
                    Security considerations for code execution
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3" data-path="../practical-pitfalls-and-best-practices/testing-and-logging-strategies.html">
            
                <a href="../practical-pitfalls-and-best-practices/testing-and-logging-strategies.html">
            
                    
                    Testing and logging strategies
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Published with HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >OnCondition and OnContextCondition</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="oncondition-and-oncontextcondition">OnCondition and OnContextCondition</h1>
<h2 id="overview">Overview</h2>
<p>In advanced agent orchestration, <strong>OnCondition</strong> and <strong>OnContextCondition</strong> are mechanisms that enable dynamic, context-aware transitions between agents or workflow steps. They allow you to encode conditional logic that evaluates context variables and determines agent behavior or routing within a multi-agent system. By leveraging these constructs, orchestration can adapt to changing context, user input, or external signals, enabling more flexible and intelligent workflows.</p>
<hr></hr>
<h2 id="explanation">Explanation</h2>
<p><strong>OnCondition</strong> and <strong>OnContextCondition</strong> are used to control the flow of execution in multi-agent workflows based on evaluated conditions:</p>
<ul>
<li><strong>OnCondition</strong>: Triggers a transition or action when a specified boolean expression or condition is met. The condition may reference current context variables, agent states, or external inputs.</li>
<li><strong>OnContextCondition</strong>: Similar to OnCondition, but specifically focuses on expressions that involve context variables, such as user state, workflow progress, or shared memory between agents.</li>
</ul>
<p><strong>Context variables</strong> are key-value pairs stored in a workflow’s context object. They allow agents to share information, track progress, or store temporary results. By updating and evaluating these variables, agents can influence each other’s behavior and orchestrate complex, adaptive flows.</p>
<h3 id="how-it-works">How it Works</h3>
<ol>
<li><strong>Storing Context Variables</strong>: Agents or orchestrators set and update context variables during execution.</li>
<li><strong>Defining Conditions</strong>: Conditions are expressed using a supported expression language (e.g., Python, Jinja, JSONata, or custom DSL).</li>
<li><strong>Evaluating Conditions</strong>: The orchestrator evaluates the condition at runtime; if it returns <code>true</code>, the specified transition or action is executed.</li>
<li><strong>Flow Control</strong>: This enables branching, looping, or early exits from workflows, depending on context.</li>
</ol>
<hr></hr>
<h2 id="examples">Examples</h2>
<h3 id="example-1-conditional-agent-routing">Example 1: Conditional Agent Routing</h3>
<pre><code class="lang-yaml"><span class="hljs-comment"># Pseudocode for a workflow definition</span>
<span class="hljs-attr">steps:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">gather_user_info</span>
    <span class="hljs-attr">agent:</span> <span class="hljs-string">UserInfoAgent</span>
    <span class="hljs-attr">on_complete:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">action:</span> <span class="hljs-string">set_context</span>
        <span class="hljs-attr">key:</span> <span class="hljs-string">user_age</span>
        <span class="hljs-attr">value:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ output.age }}</span>"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">action:</span> <span class="hljs-string">go_to</span>
        <span class="hljs-attr">step:</span> <span class="hljs-string">age_check</span>

  <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">age_check</span>
    <span class="hljs-attr">on_context_condition:</span>
      <span class="hljs-attr">condition:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ context.user_age &gt;= 18 }}</span>"</span>
      <span class="hljs-attr">next_step:</span> <span class="hljs-string">adult_flow</span>
    <span class="hljs-attr">else:</span>
      <span class="hljs-attr">next_step:</span> <span class="hljs-string">minor_flow</span>

  <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">adult_flow</span>
    <span class="hljs-attr">agent:</span> <span class="hljs-string">AdultServicesAgent</span>
    <span class="hljs-string">...</span>

  <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">minor_flow</span>
    <span class="hljs-attr">agent:</span> <span class="hljs-string">MinorServicesAgent</span>
    <span class="hljs-string">...</span>
</code></pre>
<p><strong>Explanation:</strong>  </p>
<ul>
<li>After gathering user info, the workflow stores the user's age in a context variable.</li>
<li><code>on_context_condition</code> checks the age and routes the flow to either <code>adult_flow</code> or <code>minor_flow</code> accordingly.</li>
</ul>
<hr></hr>
<h3 id="example-2-looping-until-a-condition-is-met">Example 2: Looping Until a Condition is Met</h3>
<pre><code class="lang-python"><span class="hljs-comment"># Pseudocode for an agent loop using OnCondition</span>

<span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> context[<span class="hljs-string">"done"</span>]:
    agent_output = SomeAgent.act(context)
    context[<span class="hljs-string">"done"</span>] = agent_output[<span class="hljs-string">"is_complete"</span>]
    <span class="hljs-keyword">if</span> context[<span class="hljs-string">"done"</span>]:
        <span class="hljs-keyword">break</span>
</code></pre>
<p><strong>Explanation:</strong>  </p>
<ul>
<li>The agent continues to run until the <code>"done"</code> context variable is set to <code>True</code> by agent output.</li>
</ul>
<hr></hr>
<h3 id="example-3-using-oncondition-for-error-handling">Example 3: Using OnCondition for Error Handling</h3>
<pre><code class="lang-yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">process_payment</span>
  <span class="hljs-attr">agent:</span> <span class="hljs-string">PaymentAgent</span>
  <span class="hljs-attr">on_condition:</span>
    <span class="hljs-attr">condition:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ output.success == false }}</span>"</span>
    <span class="hljs-attr">next_step:</span> <span class="hljs-string">handle_payment_error</span>
  <span class="hljs-attr">else:</span>
    <span class="hljs-attr">next_step:</span> <span class="hljs-string">confirm_order</span>
</code></pre>
<p><strong>Explanation:</strong>  </p>
<ul>
<li>If payment fails (<code>output.success == false</code>), the workflow transitions to an error handler; otherwise, it confirms the order.</li>
</ul>
<hr></hr>
<h2 id="best-practices">Best Practices</h2>
<ul>
<li><strong>Keep Conditions Simple:</strong> Complex logic can become hard to maintain; try to encapsulate logic in well-named context variables.</li>
<li><strong>Type Safety:</strong> Ensure context variables are properly typed and initialized to avoid runtime errors.</li>
<li><strong>Document Context Usage:</strong> Clearly document which agents set, read, or modify specific context variables.</li>
<li><strong>Avoid Circular Dependencies:</strong> Be careful when agents depend on variables set by others in the same step or cycle.</li>
<li><strong>Test Conditions:</strong> Write tests for branching logic to ensure all paths are covered and conditions behave as expected.</li>
<li><strong>Graceful Failure:</strong> Always provide fallback paths (e.g., <code>else</code> branches) for conditions that may not be met.</li>
</ul>
<hr></hr>
<h2 id="related-concepts">Related Concepts</h2>
<ul>
<li><a href="context-variables.md">Context Variables</a></li>
<li><a href="agent-transitions.md">Agent Transition Management</a></li>
<li><a href="expression-languages.md">Expression Languages for Orchestration</a></li>
<li><a href="error-handling.md">Error Handling in Workflows</a></li>
<li><a href="advanced-agent-orchestration.md">Advanced Agent Orchestration (Prerequisite)</a></li>
<li><a href="looping-and-iteration.md">Looping and Iterative Flows</a></li>
</ul>
<p>For further reading, consult the <a href="https://your-orchestrator-docs.example.com/" target="_blank">official orchestration documentation</a> and see examples of <a href="multi-agent-workflows.md">multi-agent workflows</a>.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="contextcondition-and-availablecondition.html" class="navigation navigation-prev " aria-label="Previous page: ContextCondition and AvailableCondition">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="contextexpression.html" class="navigation navigation-next " aria-label="Next page: ContextExpression">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"OnCondition and OnContextCondition","level":"1.7.3","depth":2,"next":{"title":"ContextExpression","level":"1.7.4","depth":2,"path":"chapters/context-variables-and-conditional-logic/contextexpression.md","ref":"chapters/context-variables-and-conditional-logic/contextexpression.md","articles":[]},"previous":{"title":"ContextCondition and AvailableCondition","level":"1.7.2","depth":2,"path":"chapters/context-variables-and-conditional-logic/contextcondition-and-availablecondition.md","ref":"chapters/context-variables-and-conditional-logic/contextcondition-and-availablecondition.md","articles":[]},"dir":"ltr"},"config":{"plugins":["theme-default","highlight"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"AutoGen Team","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Agentic Documentation","language":"en","gitbook":"*"},"file":{"path":"chapters/context-variables-and-conditional-logic/oncondition-and-oncontextcondition.md","mtime":"2025-05-24T01:52:24.917Z","type":"markdown"},"gitbook":{"version":"6.0.3","time":"2025-05-24T01:52:41.608Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/@honkit/honkit-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

